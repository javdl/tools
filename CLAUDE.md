# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Collection of standalone HTML+JavaScript tools hosted on GitHub Pages at tools.joostvanderlaan.nl. Each tool is a single self-contained HTML file with inline CSS and JavaScript.

## Commands

```bash
# Local development server
python -m http.server 8000

# Run all tests
uv pip install -e . && playwright install
pytest

# Run a single test
pytest tests/test_ocr.py::test_initial_state -v

# Build site (generates index, colophon, docs)
sh build.sh
```

## Architecture

### Tool Structure
- Each tool is a standalone `{tool-name}.html` file in the repository root
- Documentation lives in `{tool-name}.docs.md` files (auto-generated by LLM from commits)
- Tools use inline `<style>` and `<script>` tags - no build step required
- External libraries loaded via CDN (jsdelivr, cdnjs)

### Build Pipeline
- `gather_links.py` - Collects tool metadata into tools.json
- `write_docs.py` - Generates .docs.md files using LLM (requires ANTHROPIC_API_KEY)
- `build_colophon.py` - Generates colophon page with commit history
- `build_index.py` - Converts README.md to index.html
- `build.sh` - Orchestrates the full build and injects footer.js

### Testing
- Playwright + pytest for browser automation tests
- Tests in `tests/` directory use `unused_port_server` fixture from `tests/conftest.py`
- Fixture starts a local HTTP server on a random port and stops it after each test

### Standard HTML Tool Pattern
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tool Name</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        @media (max-width: 600px) { body { padding: 10px; } }
    </style>
</head>
<body>
    <h1>Tool Name</h1>
    <!-- UI elements -->
    <script>
        // Event-driven logic
    </script>
</body>
</html>
```

### Common Patterns
- Real-time processing via `input` event listeners
- Copy button with "Copied!" feedback (2-second timeout)
- Error display via `.error` div with show/hide via `.visible` class
- File input with drag & drop support
- URL hash for loading external content (e.g., `#gist=abc123`)

### Python Tools
Separate collection in `python/` directory with standalone Python scripts.
